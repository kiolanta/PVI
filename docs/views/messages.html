<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>LPNU</title>
        <link rel="stylesheet" href="../messages.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

        <link rel="manifest" href="../manifest.json">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../icons/favicon.ico" sizes="any">
        <link rel="apple-touch-icon" href="../icons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="192x192" href="../icons/android-chrome-192x192.png">
        <link rel="icon" type="image/png" sizes="512x512" href="../icons/android-chrome-512x512.png">
    </head>

    <body>
        <header>
            <div class="header">
                <div class="logo">
                    <a href="../views/student.html">LPNU</a>
                </div>
                <div class="user-info">
                    <div class="notification-header">
                        <div class="notification-bell" id="notificationBell">
                            <i class="fa-regular fa-bell"></i>
                            <span class="notification-indicator" id="notificationIndicator"></span>
                        </div>
                        <div class="notification-dropdown">
                            <div class="notification-item">
                                <img src="../ava.jpg" alt="Avatar">
                                <span>Admin</span>
                                <div class="messagee">Перевірте пошту.</div>
                            </div>
                            <div class="notification-item">
                                <img src="../ava.jpg" alt="Avatar">
                                <span>Iolanta K.</span>
                                <div class="messagee">Привітусики! Як справи? Чуєш не хочеш піти погуляти?</div>
                            </div>
                            <div class="notification-item">
                                <img src="../ava.jpg" alt="Avatar">
                                <span>Ann S.</span>
                                <div class="messagee">Що задали?</div>
                            </div>
                        </div>
                    </div>
            
                        <div class="profile-menu">
                            <img class="avatar" src="../ava.jpg" alt="User Avatar">
                            <span class="username">Iolanta Kolchyntseva</span>
                            <div class="profile-header">
                                <a href="../views/profile.html">Profile</a>
                                <button onclick="logout()">Log Out</button>
                            </div>
                        </div>
                </div>
            </div>
        </header>

    <aside class="sideburger">
        <ul class="menu">
            <li><a href="../views/dashboard.html">Dashboard</a></li>
            <li><a href="../views/student.html">Students</a></li>
            <li><a href="../views/task.html">Tasks</a></li>
        </ul>
    </aside>

    <main>
        <h1>Messages</h1>
        <br /><br />
        <div class="messages-container">
            <div class="chat-rooms">
                <div class="chat-rooms-header">
                    <h2>Chat room</h2>
                    <a href="#" class="new-chat">+ New chat room</a>
                </div>
                <ul class="chat-list" id="chat-list">
                    <!-- Динамічні чати з ким вже був діалог -->
                </ul>
            </div>
            <div class="chat-area">
                <div class="chat-header">
                    <h2 id="room-title">Chat room</h2>
                    <div class="members">
                        <span>Members</span>
                        <div class="member-avatars">
                            <!-- Аватарки генеруватимуться динамічно -->
                        </div>
                    </div>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <!-- Повідомлення -->
                </div>
                <div class="chat-input">
                    <textarea id="message-input" placeholder="Type a message..."></textarea>
                    <button class="send-button" id="send-button">
                        <i class="fa-solid fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </main>

        
    <div id="newChatModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
            <h2>Create New Chat</h2>
            <span class="close" id="closeModal">×</span>
            </div>
            <hr class="header-divider">
            <div class="modal-body">
            <div class="form-group">
                <label for="student-list">Select Users:</label>
                <div class="input-wrapper">
                <ul id="student-list" class="student-list"></ul>
                </div>
            </div>
            <div class="form-group" id="group-name-section" style="display: none;" aria-live="polite">
                <label for="group-name-input">Group Name:</label>
                <div class="input-wrapper">
                <input type="text" id="group-name-input" placeholder="Enter group name..." required>
                </div>
            </div>
            </div>
            <div class="modal-footer">
            <button type="button" id="cancelChatBtn" class="cancel-btn">Cancel</button>
            <button type="button" id="createChatBtn" class="confirm-btn">Create Chat</button>
            </div>
        </div>
    </div>

    <div id="add-members-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Add Members</h2>
      <span class="close" id="close-add-members-modal">&times;</span>
    </div>
    <hr class="header-divider">
    <div class="modal-body">
      <div class="form-group">
        <label for="members-list">Select Users to Add:</label>
        <div class="input-wrapper">
          <div id="members-list" class="student-list"></div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" id="cancel-add-members" class="cancel-btn">Cancel</button>
      <button type="button" id="confirm-add-members" class="confirm-btn">Add</button>
    </div>
  </div>
</div>
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script src="../script.js"></script>
    </body>
</html>